---

##########################################################
# Global
traefik_enable: true

##########################################################
# proxy/client

# docker
docker_configure_proxy: true
docker_proxy_http: "http://{{ groups['manager'][0] }}:8888"
docker_proxy_https: "http://{{ groups['manager'][0] }}:8888"

# apt
proxy_proxies:
  http: "http://{{ groups['manager'][0] }}:8888"
  https: "http://{{ groups['manager'][0] }}:8888"

# Needed by the Kubernetes Play
proxy_env:
  HTTP_PROXY: "http://{{ groups['manager'][0] }}:8888"
  HTTPS_PROXY: "http://{{ groups['manager'][0] }}:8888"
  NO_PROXY: "*.zone1.landscape.scs.community,*.landscape.landscape.scs.community,10.10.21.0/24"

##########################################################
# proxy/server

squid_configuration_directory: /opt/squid/configuration
squid_docker_compose_directory: /opt/squid

squid_host: 10.10.21.10
#squid_tag: 5.7-23.04_beta  # don't get fooled by "beta". this is actually production ready
squid_tag: edge


##########################
# system settings

motd_show_ssh: true
network_interface: dummy0

#osism_setup_gather_subset:
# - "!network-switches"
# - "!dhcp-static-nodes"

management_domain: mgmt.landscape.scs.community
management_gw: 10.10.23.254

##########################
# dnscrypt

# DNS Crypt acts as a DNS proxy, but is currently not really needed.
# It was a experiment.
# TODO: decide if we remove or keep it
dnscrypt_cloaks:
  - "api-internal.zone1.landscape.scs.community      10.10.21.200"
  - "api.zone1.landscape.scs.community          10.10.21.201"

############################
# kubernetes - K3s configuration
apiserver_endpoint: "10.10.21.202"
metal_lb_ip_range: "10.10.21.220-10.10.21.239"

#metal_lb_type: "frr"
#metal_lb_mode: "bgp"

##########################
# docker

docker_user: "{{ operator_user }}"

##########################
# operator

operator_user: dragon
operator_groups: [ "dragon", "adm", "sudo", "docker", "dialout" ]
user_sudoers_type: "user"

# Do not add users here, because they are deleted enirely
# please add state=absent to the users to be deleted in user_list to
# have proper numeric uid management and to not delete relevant files
# If you really want to delete a user add remove=true and force=true to the user.
user_delete:
  - "osism"

user_list:
    # The user gets a password because this is sometimes useful on the bmc console
    # for debugging in exceptional problem situations where "dragon" is not usable.
    # (i.e. extremly high load, sudo configuration and file system status of /home)
    # The system will not provide root login by ssh.
  - name: "root"
    password: "{{ operator_password_root }}"
    key: ""
  - name: "scoopex"
    key: "github"
    primary_group: dragon
    uid: 45001
    groups:
      - docker
      - dialout
  - name: "garloff"
    key: "github"
    primary_group: dragon
    uid: 45002
    groups:
      - docker
      - dialout
  - name: "berendt"
    key: "github"
    primary_group: dragon
    uid: 45003
    groups:
      - docker
      - dialout
  - name: "ignatov17"
    key: "github"
    primary_group: dragon
    uid: 45004
    #state: absent
    groups:
      - docker
      - dialout
  - name: "akafazov"
    key: "github"
    primary_group: dragon
    uid: 45005
    #state: absent
    groups:
      - docker
      - dialout
  - name: "fkr"
    key: "github"
    primary_group: dragon
    uid: 45006
    groups:
      - docker
      - dialout
  - name: "fdobrovolny"
    key: "github"
    primary_group: dragon
    uid: 45007
    groups:
      - docker
      - dialout
  - name: "osfrickler"
    key: "github"
    primary_group: dragon
    uid: 45008
    groups:
      - docker
      - dialout
  - name: "zuse-z3"
    key: "github"
    primary_group: dragon
    uid: 45009
    groups:
      - docker
      - dialout
  - name: "matofeder"
    key: "github"
    primary_group: dragon
    uid: 45010
    groups:
      - docker
      - dialout
  - name: "MatusJenca2"
    key: "github"
    primary_group: dragon
    uid: 45011
    groups:
      - docker
      - dialout
  - name: "gtema"
    key: "github"
    primary_group: dragon
    uid: 45012
    groups:
      - docker
      - dialout
  - name: "bitkeks"
    key: "github"
    primary_group: dragon
    uid: 45013
    groups:
      - docker
      - dialout
  - name: "jschoone"
    key: "github"
    primary_group: dragon
    uid: 45014
    groups:
      - docker
      - dialout


# yamllint disable rule:line-length
operator_public_key: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC2wE2xiuO+i3qmDvu8kCCKX7U7H1diOICbWmR2UrKIxqWgcfWMQsT3WclotJKuVJuKIWyFD6ZNwwLuvC3RxVSqhCiWjqxg3jzJBj7/C1O3IYyLGTUl/x7Cky530lf/aj4wrwt3Ketk/4QNwgget2nCvOy0S2NDCJ3rL6oIUjdJekvRrFf9IbWeX8fqYYCoh1cYJWto1XYPnhMDAB/lqtjN1ssurLSKoJg/bUT7q/KkIvvA/BOR2NMqS0aGx+bKhdkeB22V/t75Ct8ymoCYk9+MTC9i/QX20Fi7835/W7Gl18J8NiO9ebaWyYbsxZ5klWXQa5EiLLBDZ82OR88G+0FjXp1Z3VG6FcpdYpW7sxrT21HEvWOnQACZCdlzwyBJ31id/LjDRhJU6BmZm0Sa9EOJNL8XVOUUzuoa0XL1mIVTsmLpUwqLSfw6Ditb+q4afFi0iYMe3JKOt+JmftvBgeQCjNUsCzk+Ny2j6dZKv2aeF5LOQZGRM3HzG39Gkir3q1zdWmCl4lc3QQBfr5ZcdAp+wQMFSgJAudKffO9kdDVNoyjgih7rD3E+JjJdhY9//WQEEBm2vfEqm7qqEQUAELd0JBCivJmOhUVH0rGbTrnkTBtLR4Au40W5aYaNQJ7+U3hTRrvpycSC1pUU3Wq3OXJd2FRDgKQJljQcpBw4V9j8GQ==
# yamllint enable rule:line-length

# Todo: add lookup to created users instead of repeating
operator_authorized_keys_minimal: 2
operator_authorized_keys:
  - "{{ operator_public_key }}"
  - "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCg4wI3FupkrmzAkQfRkqkS5CQUp3NiIf3jkFk+E7ax/hdgbaW/UjBl9j15BMv/Mmguk11OtHTDgg57VrsL+mPtortKe2DvoVQZxvtnuDhZPFXlNZWJxYkcUUoPy7OwlDjTvfX9QS27rX8Kmz+wKRWz2VSZU3IqTDho+0NX8r3Zrbtkq75nB4Fq99WOzbhdve78GmTABgQvbT5Ypm7bc77cftARWJiyprHocUizui6CdITTPpxUf98HaFo5ZP3YhnZsMlSDu2T2ofiHKXhW+Q7FHP9GiiaH173zLxXFV6LpJ/wDyI8wT3jqPE+FKXyPXKVCDohmbQHOzY5eiePSqhsRbd19wGmkqqqTtKjL9/yUPQ8Lkft0iQPvmepzrB3qL9dLBthKrLNqDAeEv3Eg9MsTTaRyVuQRDizCeySXNMgv+CoeT6PyQstKV68SwUhsCAyIok8y6hFdHSVve66De31fYvkHtMu9C/R5NuhxMuZazazKlpDN9eeBmvT4Pqc5lrc="
  - "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDTMjccqOa268YWdqAhP9awmMtjey/MK92gl+IwpQbxxsEW/HM/EKPGQnF0+7lD6G1W2IqJnFTM5fgWjAmIfzGeR3ySjJDlaQtZdiMHk5YR7VrgRot0odlGZpkkkJnK88xDVYqkq3xmJx39DTF8sKxfWThc1eu5c7Ws7hIvDCvFu4I5w+iPB4R2eycw//A1q3hutagyghJAXad46PgBmu1kODwQG3+sPqNyb4ruh0ODDbSlBZ1XIW4TgaYce5tR8ABlVvASafhZOw3CNK9rThhU4IG3IHvqCsGax269WrIGvSWIkI4EKjvFAEyshOcBsGwjaxm9GxrJLBLpyMVds/Rn3vu4JmupJJFHnWtEyQY6pd77TKyatRcZFjDXrGTPtiHCaMLG49RXvoeHIebjPB3bHqVWJSK5c81oSQwPZTxze5jY2LQOHmpBQ6D2l+5lkzgTQiF3EL7gD6m5Wweht++gQHJ+PnsCkaMZzoT1VdIGrzMO6Tf4O1WTQGkuD/9YtaM="
  - "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIACLmNpHitBkZGVbWAFxZjUATNvLjSktAKwokFIQ9Z1k"

##########################
# hosts

hosts_type: template
hosts_additional_entries:
  api-internal.zone1.landscape.scs.community: 10.10.21.200
  api.zone1.landscape.scs.community: 10.10.21.201

##########################
# ceph

ceph_cluster_fsid: 44bc2d19-fd83-4b92-a6c4-eed358e35672
# BEGIN: TLS
certificates_ca:
  - name: custom.crt
    certificate: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          36353837373465363032333765653631363930343462363830306464613362633866613831326164
          3539656132653164363938653565376333303964656438650a323162646663373961626631386230
          37376539306432303431636530373933613763643863623738613465666537316565333539383433
          6539343339656135650a383434376261616663653731343634313935653135373736386264333334
          32373939303565656434623733333930613734333035316634356466633063393638353638333531
          31316337633463396339613566306435636131663236333466616239623462363562613835323064
          65653432346661626437646133656264613930343733336634376536393339643263353965373764
          66343735303064623061326532346539376361313532613331666334313432373134346239666133
          61383433613137323631663139633965386334626363333536316635353235306663303834323631
          35303665626164373763613034396438333134646136613136393235386663373836663465633839
          65343439646634316633656236373234323864643435346466626165646536363435343835313764
          64393939333735303061316433633266646631623033313232643634653362613864336237343763
          38323837356339343435393264333431313964663130636531656434656261636134633964643934
          32623664386537656134363337353062323038343135613937313862363235623136313337306332
          35313263653366303637376431626439613765306635643333626339363365303163303432643062
          37393234363962323737303762623031306464373463373537663136386638313266666663303237
          62616466653462343932346435633462663661323164356462306237623938373363643632326239
          38313333316632643339303532626233333736303263353135616635666561646338663761646563
          62653864636565373665666238626665373834323539643730303836336564386333343836663936
          61333465323563366662396438313332316439383436356235336636346435373063623964313164
          32316562303763636265343539313161316666613862366636343431343239373136623462313439
          62373130613131613430396333343164663734663834396333313666326538393136613835363832
          37313836316132666262633763666535633630373863393235663934383561356633373334393166
          34346639646536666236326132303237366132336534383534663137353632626332613436356639
          39363939323134633665366235383831353531653064333734306339353732636232663138316164
          64656536313939623637333232306535353163336636323131376362623236356338613865396664
          31616462396637643633353766316232383633653662636166633335623763646534303364373233
          32623262383661303966306661323263366335376434643931393535326533323230633165303830
          30316638333134396666666365333966333065323032643661353866656536653232636638306363
          66636131653065343232393734306337396232643031623532363465363965396336396537666436
          33333364343832663635616266636266383430346432346662373630363562353232333530323936
          62316537336435396336333230353438646466373833313839313030333838333363393461313630
          38643064636338326164393133343635663637376365343037653730316134613466323736316165
          62323239356538616165303335336430366237333130316666386432303764346334383763623039
          34356132323866623966373866633136366535316264356466396433623832373733323365333630
          66363634663737363238353232303762376164643661323636373434613838363965653832626666
          64313936663563376136303636643664346132613137363930303132383538363733623032636635
          35336430626339633662353036363236393262333763303265353035613634663661383633353935
          65613637343064303062393666636430326430643138353362616262316465306431353861633562
          62633837666333383737313634636234313835613431363562373338333738363230626134336465
          37623763306638656461303738386662643530613265336137613736386162336533326364393833
          66316139663838663030626436356133666535626366353961643633306565623231353930313462
          61616230306632653461616566316266376665306130616135306563336439656132343433623966
          39373263396332323539643735346334363937633464326135383064326234376231313164306235
          61336166383332643565303631356132383462313034333539626434333463613137663766396362
          65326335326663316236336663323964393362626632366162386231653937633364306131613265
          63396234626162306235663437306163663736313636383935666331656234333963353230613037
          31643763613333323238613731333036373638306563623132306166666238663133663435363663
          66653839646137653534333565646638396335386266346139656266306462326234333439363163
          63656135346465383330356564366265663330646639663364653365636531323864373334356365
          63343734383635326230633835306436383932323965323366666161613665636138613662613766
          35333233383130333234326563383034623735636365356563326635336432303638353336313539
          38646164396462653863393535623334363132376239376534666361363235353131646461316563
          64353431656531323532636561373533656537643462323034393063376361313764623836393935
          31616630323065316636323636663733646636396664626134653261376430343166316232393861
          31626435656466383734363637636264303463623334336461613838336363336265633735383732
          39666534333435666465353632666635383461396461613362373364383332383531376537623766
          32343539303439383266306334656632323364336664636163646563373531663532306331323336
          33353031613333376134626665646233616437666138393933313666613934333165306538303264
          64613835633139346135393732373362393735303263663632613863613966633861376130663034
          36663137653936616234303764383665353138343032323238363738393038616261663737366434
          33383035333333663035626334346461613139643834663834373533343434393464303339386136
          64646232663733633761343061613663383261343036636534623133303833343761656539366539
          31363861663731316331303561366335373865303563336134306532613130663938306236336132
          66356337643731386165656434333263313431356662663161356465336637646361343636636466
          34346335326162653931326161613230363337396530353232666539323166306330376635393066
          30366563326266383137343133333162613465636336373430633638323035303561386635343733
          66626363613338326137363730306462663333653434653531313361656162623966353566623061
          39613133653635376661393566353663646337386332333439353363633863666238386339643635
          66653062353332353934643363663037663133303538666239613464373365326232323732656337
          37366631636262343163656236623231656165306332343038663332623332616166656561666336
          33376136326564313466623135366530393364623430346466623231323063613366313464323637
          63396433646432326431376336353833653536346263343065643034323264623739616465366163
          37363963636532333531323761626631633038313962313939356234643130646632336637653933
          37393637653131343364306436353765336662656562663232306634616535316465613838663165
          32383161336462323333323763366365643763636430346137633964373636633639333131396262
          36353763356338303162326438376235306435366365326362663635303662616335633165633930
          38373261333739373034383537366535656535353436376439646336383737363666626664373035
          63353232653435313032626166666336363333643564613636383036303230646330633231343237
          63633133643966333761373961643230396133343935346231623662353735333965323833616537
          39306333393761363039653531623733633838666536646132316532343166646436383535396532
          37613363663761326565383761323962303465326536373366323137643965663434633963303435
          31396566666630623363383135616636393762613762363864366134303137663236643837613765
          33393536306665366130393939393030303337363165346532366534633730646461643137343731
          64323561386338623536633565346636393132626134366464346530303266656363383362633061
          66613230376536363031646166386334346461646466313534613736386338393161666637353138
          39323038316239323838313763636336363164653030666163633932623166613063626430363964
          32613338326461373665373361316161663236643063666233613830376231373039653235363938
          32666465613433666162313836313438316637323635373737663630383735383936366363613336
          33343536666162323166316337353036323738333461633934393330326334666364623930383231
          30653430356636353761313764396632616431303733653635643863656332613038646236643936
          62386161323061643436393634323163353663613861303833356139336133353063363462306433
          61366531663834646266633636306166626165313830303262636533353833373661346263353239
          38323665353865643038323163366666303931363935363235366133393363313866636163306665
          32393936306232356433326632393464383064633263366531643934636266336139336139303831
          30623631643163303032613264656535313063333561363735353466656265313436306661353134
          31626630623864346465343634336332386265353238646166633066633333346136663531653639
          61666461656338326565383331663737323266353339303233336639613064633337613432336438
          61303530333965633536643163346330653838663035303538326430613363373937363630646361
          37333364396434303937613038393433373265383735393737373738356465383162656530333236
          37633663353635343461333164653862326465636666346633376164356661626539363437623434
          35336637343134363136356538366133356136366438363233363236333235393239303538323965
          66383465663261633938646264363863646563323631343737316135303230623232323162316466
          61646264383161323730
# END: TLS
