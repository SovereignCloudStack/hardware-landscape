---

##########################################################
# Global
traefik_enable: true

##########################################################
# proxy/client

# docker
docker_configure_proxy: true
docker_proxy_http: "http://{{ groups['manager'][0] }}:8888"
docker_proxy_https: "http://{{ groups['manager'][0] }}:8888"

# apt
proxy_proxies:
  http: "http://{{ groups['manager'][0] }}:8888"
  https: "http://{{ groups['manager'][0] }}:8888"

# Needed by the Kubernetes Play
proxy_env:
  HTTP_PROXY: "http://{{ groups['manager'][0] }}:8888"
  HTTPS_PROXY: "http://{{ groups['manager'][0] }}:8888"
  NO_PROXY: "*.int1.landscape.sovereignit.de,*.landscape.sovereignit.de,10.10.21.0/24"

##########################################################
# proxy/server

squid_configuration_directory: /opt/squid/configuration
squid_docker_compose_directory: /opt/squid

squid_host: 10.10.21.10
#squid_tag: 5.7-23.04_beta  # don't get fooled by "beta". this is actually production ready
squid_tag: edge


##########################
# system settings

motd_show_ssh: true
network_interface: dummy0

#osism_setup_gather_subset:
# - "!network-switches"
# - "!dhcp-static-nodes"

management_domain: mgmt.sovereignit.de
management_gw: 10.10.23.254

##########################
# dnscrypt

# DNS Crypt acts as a DNS proxy, but is currently not really needed.
# It was a experiment.
# TODO: decide if we remove or keep it
dnscrypt_cloaks:
  - "api-int.int1.landscape.sovereignit.de      10.10.21.200"
  - "api.int1.landscape.sovereignit.de          10.10.21.201"

############################
# kubernetes - K3s configuration
apiserver_endpoint: "10.10.21.202"
metal_lb_ip_range: "10.10.21.220-10.10.21.239"

#metal_lb_type: "frr"
#metal_lb_mode: "bgp"

##########################
# docker

docker_user: "{{ operator_user }}"

##########################
# operator

operator_user: dragon
operator_groups: [ "dragon", "adm", "sudo", "docker", "dialout" ]
user_sudoers_type: "user"

# Do not add users here, because they are deleted enirely
# please add state=absent to the users to be deleted in user_list to
# have proper numeric uid management and to not delete relevant files
# If you really want to delete a user add remove=true and force=true to the user.
user_delete:
  - "osism"

user_list:
    # The user gets a password because this is sometimes useful on the bmc console
    # for debugging in exceptional problem situations where "dragon" is not usable.
    # (i.e. extremly high load, sudo configuration and file system status of /home)
    # The system will not provide root login by ssh.
  - name: "root"
    password: "{{ operator_password_root }}"
    key: ""
  - name: "scoopex"
    key: "github"
    primary_group: dragon
    uid: 45001
    groups:
      - docker
      - dialout
  - name: "garloff"
    key: "github"
    primary_group: dragon
    uid: 45002
    groups:
      - docker
      - dialout
  - name: "berendt"
    key: "github"
    primary_group: dragon
    uid: 45003
    groups:
      - docker
      - dialout
  - name: "ignatov17"
    key: "github"
    primary_group: dragon
    uid: 45004
    #state: absent
    groups:
      - docker
      - dialout
  - name: "akafazov"
    key: "github"
    primary_group: dragon
    uid: 45005
    #state: absent
    groups:
      - docker
      - dialout
  - name: "fkr"
    key: "github"
    primary_group: dragon
    uid: 45006
    groups:
      - docker
      - dialout
  - name: "fdobrovolny"
    key: "github"
    primary_group: dragon
    uid: 45007
    groups:
      - docker
      - dialout
  - name: "osfrickler"
    key: "github"
    primary_group: dragon
    uid: 45008
    groups:
      - docker
      - dialout
  - name: "zuse-z3"
    key: "github"
    primary_group: dragon
    uid: 45009
    groups:
      - docker
      - dialout
  - name: "matofeder"
    key: "github"
    primary_group: dragon
    uid: 45010
    groups:
      - docker
      - dialout
  - name: "MatusJenca2"
    key: "github"
    primary_group: dragon
    uid: 45011
    groups:
      - docker
      - dialout

# yamllint disable rule:line-length
operator_public_key: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC2wE2xiuO+i3qmDvu8kCCKX7U7H1diOICbWmR2UrKIxqWgcfWMQsT3WclotJKuVJuKIWyFD6ZNwwLuvC3RxVSqhCiWjqxg3jzJBj7/C1O3IYyLGTUl/x7Cky530lf/aj4wrwt3Ketk/4QNwgget2nCvOy0S2NDCJ3rL6oIUjdJekvRrFf9IbWeX8fqYYCoh1cYJWto1XYPnhMDAB/lqtjN1ssurLSKoJg/bUT7q/KkIvvA/BOR2NMqS0aGx+bKhdkeB22V/t75Ct8ymoCYk9+MTC9i/QX20Fi7835/W7Gl18J8NiO9ebaWyYbsxZ5klWXQa5EiLLBDZ82OR88G+0FjXp1Z3VG6FcpdYpW7sxrT21HEvWOnQACZCdlzwyBJ31id/LjDRhJU6BmZm0Sa9EOJNL8XVOUUzuoa0XL1mIVTsmLpUwqLSfw6Ditb+q4afFi0iYMe3JKOt+JmftvBgeQCjNUsCzk+Ny2j6dZKv2aeF5LOQZGRM3HzG39Gkir3q1zdWmCl4lc3QQBfr5ZcdAp+wQMFSgJAudKffO9kdDVNoyjgih7rD3E+JjJdhY9//WQEEBm2vfEqm7qqEQUAELd0JBCivJmOhUVH0rGbTrnkTBtLR4Au40W5aYaNQJ7+U3hTRrvpycSC1pUU3Wq3OXJd2FRDgKQJljQcpBw4V9j8GQ==
# yamllint enable rule:line-length

# Todo: add lookup to created users instead of repeating
operator_authorized_keys_minimal: 2
operator_authorized_keys:
  - "{{ operator_public_key }}"
  - "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCg4wI3FupkrmzAkQfRkqkS5CQUp3NiIf3jkFk+E7ax/hdgbaW/UjBl9j15BMv/Mmguk11OtHTDgg57VrsL+mPtortKe2DvoVQZxvtnuDhZPFXlNZWJxYkcUUoPy7OwlDjTvfX9QS27rX8Kmz+wKRWz2VSZU3IqTDho+0NX8r3Zrbtkq75nB4Fq99WOzbhdve78GmTABgQvbT5Ypm7bc77cftARWJiyprHocUizui6CdITTPpxUf98HaFo5ZP3YhnZsMlSDu2T2ofiHKXhW+Q7FHP9GiiaH173zLxXFV6LpJ/wDyI8wT3jqPE+FKXyPXKVCDohmbQHOzY5eiePSqhsRbd19wGmkqqqTtKjL9/yUPQ8Lkft0iQPvmepzrB3qL9dLBthKrLNqDAeEv3Eg9MsTTaRyVuQRDizCeySXNMgv+CoeT6PyQstKV68SwUhsCAyIok8y6hFdHSVve66De31fYvkHtMu9C/R5NuhxMuZazazKlpDN9eeBmvT4Pqc5lrc="
  - "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDTMjccqOa268YWdqAhP9awmMtjey/MK92gl+IwpQbxxsEW/HM/EKPGQnF0+7lD6G1W2IqJnFTM5fgWjAmIfzGeR3ySjJDlaQtZdiMHk5YR7VrgRot0odlGZpkkkJnK88xDVYqkq3xmJx39DTF8sKxfWThc1eu5c7Ws7hIvDCvFu4I5w+iPB4R2eycw//A1q3hutagyghJAXad46PgBmu1kODwQG3+sPqNyb4ruh0ODDbSlBZ1XIW4TgaYce5tR8ABlVvASafhZOw3CNK9rThhU4IG3IHvqCsGax269WrIGvSWIkI4EKjvFAEyshOcBsGwjaxm9GxrJLBLpyMVds/Rn3vu4JmupJJFHnWtEyQY6pd77TKyatRcZFjDXrGTPtiHCaMLG49RXvoeHIebjPB3bHqVWJSK5c81oSQwPZTxze5jY2LQOHmpBQ6D2l+5lkzgTQiF3EL7gD6m5Wweht++gQHJ+PnsCkaMZzoT1VdIGrzMO6Tf4O1WTQGkuD/9YtaM="
  - "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIACLmNpHitBkZGVbWAFxZjUATNvLjSktAKwokFIQ9Z1k"

##########################
# hosts

hosts_type: template
hosts_additional_entries:
  api-int.int1.landscape.sovereignit.de: 10.10.21.200
  api.int1.landscape.sovereignit.de: 10.10.21.201

##########################
# ceph

ceph_cluster_fsid: 44bc2d19-fd83-4b92-a6c4-eed358e35672
# BEGIN: TLS
certificates_ca:
  - name: custom.crt
    certificate: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          65633863633634356233363366393764373161363464326633633738333934333364663237356433
          6339623666316433393937323964373039613135363135630a373163363034666461373562323964
          63363032623839343839376466633534356437613635636635356634333164306132336234353863
          3837346166316263630a303932353061316631653333356633666636393462356130613333386230
          31616331346337396139653634393836326464373738383037613563386238636633653532306434
          34653661346262393131653735623065306163353133306435366337333034306337336565343663
          38363038613030356337633635306238613863346437366437386231343635306334663933393965
          62653262316333663435646162613363313236666637316131366133356166653364663536373739
          34643832636263383434323639613639653430646530373938353936316233383135336238626365
          38303630373163633932313832386637613839316330363162656439313935316437663663303636
          63333932396661383431363961366661376630313635643262316139373264333135633564356634
          64306437366463363137376362303030613534333561636533356431336364616135356536646430
          37646331656164363964313831373932383162356135383533336638613535653932623239393965
          61656239303235343864363332626239396236376639323139316663383265666634363664663830
          64636538333864343235393564346266303066316538346335303039373937336536376533663438
          66376134343937366130616432346662366336333537643738333537616635613639393830626463
          66373435333762643763333530326466633064303433323132396163303830306436633765346232
          31383435356332386634306135316463393138613131323637303365653531353334653732653436
          35643633653731343932353765646661386335333031653633303634613264633065326234363533
          32366339663931306266643430373938663237396465663332343663653434313563663931343836
          38336238366638323065666463373961646463343135366366326436356665363231316430353738
          37363234373430383662316364313237303063383262343565636561613632333239363634313363
          66376665353432383838336266626633336532303764386336643335363737306362303937643837
          30663237353562343766383334633637623337333437323131653432396634613066313730333638
          66663532353764653761343063643539383034343636343236336434353236396436306563396439
          62303565303334626533353936363235303035376463633437616133626535633064643337633539
          37396538663832653639363430373939616166343964383939663133653332313639373866303864
          61393763376564373065333939303938366431396238346638366465333639633665393364636333
          32336230373037323930323262386330363566313465633632646132316465663064323063343338
          37643862333139313838323733313362353262626134616339643261323931633863343565643530
          35643064643736366136613636323934393036656433376239383466396630326139343761363461
          34333734346537356437663631303262386662363033373236386634393237666337343237323265
          66306135366533373166623632306162356263386166646531396339646339623062653935643064
          31633862323262373930343966373633316362373362363432346364363962313038313031366566
          31643730613366666337613665316239656136656331346163653765336365386538656161373664
          64313135303162343234663564313763366664643031356236333965376631633131346163643361
          36396531343638613632653734383664643432666635306563616638633131323663363635643031
          63343136313832386238633066613466313339363661346537663066313234363761326361393733
          65643763313665313137343761666530646332613133353433663533366530666266356266653366
          32366631393333346230666632613135646631396230313366383537356634633536353635633638
          34343162333335373937633466633532363933623465336537383037363034633635616432326133
          36386232613164393930666635636663346238646266613661656239616561383762303764353630
          63333738633731613237343830663334623630653439633466653531396138303036393537616365
          32376561396438373032653435353463623162313431326139383532303532613662623565396434
          37346465353339326533316638623865663239383065306531393038303166363030353064386332
          66373461646436333737373765313833626131366164386439373664643539636366613564353539
          30356638323065313536636463623335666231386633386439626332343566373239353931303932
          36353438333336323738633963643463376664383533303162346161323737646431313132613164
          66663231383935393034353464336664393935306263306464663535303533643736393736386332
          30653339336632363035643563626364303130363130353862353266336335356264386562373236
          63616137396435363931363365346634666661363931356630326135623634373133356662336632
          35326566353035393331386236663030376335653132343638633961633234323334326264363566
          39376466316638613930663165303533363662653131353832623838633730313032346164306666
          37303039383737373733666438313730366339396664386363623631366364376237633333366166
          63613732623865343961393065393932323663356432356234373633663137336133343839343364
          32376466333064386530633364323638376530353137313737383234333835326562396361663331
          33613733356333653137303162386336616564393138386539313232663030356536393864376630
          62353737633364666163316436366430633433653064623330323336396136626534616238333433
          66323733633230356132643630393131616634376565353533393636653661303135656164333162
          63653964306237333563323731326433303138653663313965326435663939646230333264626532
          39363064356230393830666662363462393166633032303332353961623261303438316239366630
          32663166663663653935623334373565653363393264613338626439663862343737626132303565
          63393162623866626632663432333364363637306261643262376439333464316333613766306364
          35363330643034663764393066623439306165333862643538383564333538393633346436316261
          33623435363863303939386632636235646335366137323364343034396434393563333931613537
          61303139383433366462383030363565373763396565303137363937646431313533376633653732
          37363431623736666164306337343836613636636666326566386239636634343031333435383238
          63373130336537653262386339396533316465666430313630656165616664313231313034333163
          65663139316138373938346533626538376663336262346565373933613465323030353038333164
          35353331306438616338373666646265653165656662353365643038353735356136666533323938
          34393733383562343838386161316263646634653238636465643537386563303538663930383532
          30386362313234633435613635376661333333346533633736626436613265343066363637666336
          65333838623766666238656534623033343761363337386333373931343264383833636338393633
          33663132613762313035363966396261393032356638393330386562616533353164386537373130
          38326664653330613333303337383130613732646461646162616237626138396262643062363536
          61306333656539313065626337393934336566383131316431326132636134353732623433353738
          38326630383535373761663133376663376438393232363137373137633566626335333564336534
          34326337363830623533393861623964306432656330373032313165633537373132336530306138
          66633036386161303961353736383538626135303562353130313635633964343735313438613366
          36663034303032643230633738356161393364306334343962316164303332376361333733643163
          63326433616664363236646639623032613837393535363437306364623364313833633336613161
          39376337323561343462393862333531373165656364646163393561623564636335303131656539
          64396265643836326138633732316631386561613232666332616432663566313763653066313436
          36323630323832663965396466346338366231663237626333316134396630306430373436653137
          34316466633936356165303933653830353662366237343136613631386162613661616563393134
          35633861653263316334633239313366636235336164356532353037373863613965383565326139
          64626366626666653833623939373835346233623339356365633465356638333163643139393537
          63326539333438363363353864656431653138666239326466643030636637376263633830386361
          61653465353138396239326436343666663861633062313531343731383564306330313036316537
          34613334616239306538616261343332313961643839326462626234383638323535356236373137
          35366364353637313364383465633162656539313631376338313566363336633030396635323231
          61333237366434316335336564366165323166353833666162323431626265363533396164303632
          62303731653764323564386565623132666438303663313332326665313839356435653466373063
          63653933356138653536343931666365393739383461653231393430656462303539383961663863
          37623930343339353764356336663866336564333363303935613636363566633838356337306537
          38653330313338303239363432393663656164393530373135356238353939323531346663363134
          33633965396165643831333061646631653863643439346633623936333933343639363233373735
          39656263636139303538626639383833333530653636393430666438613735613838646431366535
          35633931363436353166396131396162356437393262643435376434323265326364306265613336
          30616632346138393965393138333234633534633336636634366138303663333932633865303131
          34306265343233333761386135306264616237386634346631306161343962393034343534383735
          61653838386330393933373739306462333833626664623930623632316631346463613465613430
          65383534633136383161393033613966663032353066396465363535616638373934626138353235
          32383134303738653636
# END: TLS
