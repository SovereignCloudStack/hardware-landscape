---

##########################################################
# Global
traefik_enable: true

##########################################################
# proxy/client

# docker
docker_configure_proxy: true
docker_proxy_http: "http://{{ groups['manager'][0] }}:8888"
docker_proxy_https: "http://{{ groups['manager'][0] }}:8888"

# apt
proxy_proxies:
  http: "http://{{ groups['manager'][0] }}:8888"
  https: "http://{{ groups['manager'][0] }}:8888"

# Needed by the Kubernetes Play
proxy_env:
  HTTP_PROXY: "http://{{ groups['manager'][0] }}:8888"
  HTTPS_PROXY: "http://{{ groups['manager'][0] }}:8888"
  NO_PROXY: "*.int1.landscape.sovereignit.de,*.landscape.sovereignit.de,10.10.21.0/24"

##########################################################
# proxy/server

squid_configuration_directory: /opt/squid/configuration
squid_docker_compose_directory: /opt/squid

squid_host: 10.10.21.10
#squid_tag: 5.7-23.04_beta  # don't get fooled by "beta". this is actually production ready
squid_tag: edge


##########################
# system settings

motd_show_ssh: true
network_interface: dummy0

#osism_setup_gather_subset:
# - "!network-switches"
# - "!dhcp-static-nodes"

management_domain: mgmt.sovereignit.de
management_gw: 10.10.23.254

##########################
# dnscrypt

# DNS Crypt acts as a DNS proxy, but is currently not really needed.
# It was a experiment.
# TODO: decide if we remove or keep it
dnscrypt_cloaks:
  - "api-int.int1.landscape.sovereignit.de      10.10.21.200"
  - "api.int1.landscape.sovereignit.de          10.10.21.201"

############################
# kubernetes - K3s configuration
apiserver_endpoint: "10.10.21.202"
metal_lb_ip_range: "10.10.21.220-10.10.21.239"

#metal_lb_type: "frr"
#metal_lb_mode: "bgp"

##########################
# docker

docker_user: "{{ operator_user }}"

##########################
# operator

operator_user: dragon
operator_groups: [ "dragon", "adm", "sudo", "docker", "dialout" ]
user_sudoers_type: "user"

# Do not add users here, because they are deleted enirely
# please add state=absent to the users to be deleted in user_list to
# have proper numeric uid management and to not delete relevant files
# If you really want to delete a user add remove=true and force=true to the user.
user_delete:
  - "osism"

user_list:
    # The user gets a password because this is sometimes useful on the bmc console
    # for debugging in exceptional problem situations where "dragon" is not usable.
    # (i.e. extremly high load, sudo configuration and file system status of /home)
    # The system will not provide root login by ssh.
  - name: "root"
    password: "{{ operator_password_root }}"
    key: ""
  - name: "scoopex"
    key: "github"
    primary_group: dragon
    uid: 45001
    groups:
      - docker
      - dialout
  - name: "garloff"
    key: "github"
    primary_group: dragon
    uid: 45002
    groups:
      - docker
      - dialout
  - name: "berendt"
    key: "github"
    primary_group: dragon
    uid: 45003
    groups:
      - docker
      - dialout
  - name: "ignatov17"
    key: "github"
    primary_group: dragon
    uid: 45004
    #state: absent
    groups:
      - docker
      - dialout
  - name: "akafazov"
    key: "github"
    primary_group: dragon
    uid: 45005
    #state: absent
    groups:
      - docker
      - dialout
  - name: "fkr"
    key: "github"
    primary_group: dragon
    uid: 45006
    groups:
      - docker
      - dialout
  - name: "fdobrovolny"
    key: "github"
    primary_group: dragon
    uid: 45007
    groups:
      - docker
      - dialout
  - name: "osfrickler"
    key: "github"
    primary_group: dragon
    uid: 45008
    groups:
      - docker
      - dialout
  - name: "zuse-z3"
    key: "github"
    primary_group: dragon
    uid: 45009
    groups:
      - docker
      - dialout
  - name: "matofeder"
    key: "github"
    primary_group: dragon
    uid: 45010
    groups:
      - docker
      - dialout
  - name: "MatusJenca2"
    key: "github"
    primary_group: dragon
    uid: 45011
    groups:
      - docker
      - dialout
  - name: "gtema"
    key: "github"
    primary_group: dragon
    uid: 45012
    groups:
      - docker
      - dialout
  - name: "bitkeks"
    key: "github"
    primary_group: dragon
    uid: 45013
    groups:
      - docker
      - dialout
  - name: "jschoone"
    key: "github"
    primary_group: dragon
    uid: 45014
    groups:
      - docker
      - dialout


# yamllint disable rule:line-length
operator_public_key: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC2wE2xiuO+i3qmDvu8kCCKX7U7H1diOICbWmR2UrKIxqWgcfWMQsT3WclotJKuVJuKIWyFD6ZNwwLuvC3RxVSqhCiWjqxg3jzJBj7/C1O3IYyLGTUl/x7Cky530lf/aj4wrwt3Ketk/4QNwgget2nCvOy0S2NDCJ3rL6oIUjdJekvRrFf9IbWeX8fqYYCoh1cYJWto1XYPnhMDAB/lqtjN1ssurLSKoJg/bUT7q/KkIvvA/BOR2NMqS0aGx+bKhdkeB22V/t75Ct8ymoCYk9+MTC9i/QX20Fi7835/W7Gl18J8NiO9ebaWyYbsxZ5klWXQa5EiLLBDZ82OR88G+0FjXp1Z3VG6FcpdYpW7sxrT21HEvWOnQACZCdlzwyBJ31id/LjDRhJU6BmZm0Sa9EOJNL8XVOUUzuoa0XL1mIVTsmLpUwqLSfw6Ditb+q4afFi0iYMe3JKOt+JmftvBgeQCjNUsCzk+Ny2j6dZKv2aeF5LOQZGRM3HzG39Gkir3q1zdWmCl4lc3QQBfr5ZcdAp+wQMFSgJAudKffO9kdDVNoyjgih7rD3E+JjJdhY9//WQEEBm2vfEqm7qqEQUAELd0JBCivJmOhUVH0rGbTrnkTBtLR4Au40W5aYaNQJ7+U3hTRrvpycSC1pUU3Wq3OXJd2FRDgKQJljQcpBw4V9j8GQ==
# yamllint enable rule:line-length

# Todo: add lookup to created users instead of repeating
operator_authorized_keys_minimal: 2
operator_authorized_keys:
  - "{{ operator_public_key }}"
  - "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCg4wI3FupkrmzAkQfRkqkS5CQUp3NiIf3jkFk+E7ax/hdgbaW/UjBl9j15BMv/Mmguk11OtHTDgg57VrsL+mPtortKe2DvoVQZxvtnuDhZPFXlNZWJxYkcUUoPy7OwlDjTvfX9QS27rX8Kmz+wKRWz2VSZU3IqTDho+0NX8r3Zrbtkq75nB4Fq99WOzbhdve78GmTABgQvbT5Ypm7bc77cftARWJiyprHocUizui6CdITTPpxUf98HaFo5ZP3YhnZsMlSDu2T2ofiHKXhW+Q7FHP9GiiaH173zLxXFV6LpJ/wDyI8wT3jqPE+FKXyPXKVCDohmbQHOzY5eiePSqhsRbd19wGmkqqqTtKjL9/yUPQ8Lkft0iQPvmepzrB3qL9dLBthKrLNqDAeEv3Eg9MsTTaRyVuQRDizCeySXNMgv+CoeT6PyQstKV68SwUhsCAyIok8y6hFdHSVve66De31fYvkHtMu9C/R5NuhxMuZazazKlpDN9eeBmvT4Pqc5lrc="
  - "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDTMjccqOa268YWdqAhP9awmMtjey/MK92gl+IwpQbxxsEW/HM/EKPGQnF0+7lD6G1W2IqJnFTM5fgWjAmIfzGeR3ySjJDlaQtZdiMHk5YR7VrgRot0odlGZpkkkJnK88xDVYqkq3xmJx39DTF8sKxfWThc1eu5c7Ws7hIvDCvFu4I5w+iPB4R2eycw//A1q3hutagyghJAXad46PgBmu1kODwQG3+sPqNyb4ruh0ODDbSlBZ1XIW4TgaYce5tR8ABlVvASafhZOw3CNK9rThhU4IG3IHvqCsGax269WrIGvSWIkI4EKjvFAEyshOcBsGwjaxm9GxrJLBLpyMVds/Rn3vu4JmupJJFHnWtEyQY6pd77TKyatRcZFjDXrGTPtiHCaMLG49RXvoeHIebjPB3bHqVWJSK5c81oSQwPZTxze5jY2LQOHmpBQ6D2l+5lkzgTQiF3EL7gD6m5Wweht++gQHJ+PnsCkaMZzoT1VdIGrzMO6Tf4O1WTQGkuD/9YtaM="
  - "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIACLmNpHitBkZGVbWAFxZjUATNvLjSktAKwokFIQ9Z1k"

##########################
# hosts

hosts_type: template
hosts_additional_entries:
  api-int.int1.landscape.sovereignit.de: 10.10.21.200
  api.int1.landscape.sovereignit.de: 10.10.21.201

##########################
# ceph

ceph_cluster_fsid: 44bc2d19-fd83-4b92-a6c4-eed358e35672
# BEGIN: TLS
certificates_ca:
  - name: custom.crt
    certificate: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          62343463313434316632653963643662626562626465306239626565643139646438663366396662
          3266656133623234386137643538623762393430313935650a666666626639373838343938653439
          35343534306637616435393331656432303239666137383564343232336237383165613239613165
          6532386630653430340a366339386639386632643562323362613036616431623166623537346432
          35336639356434393533313032656462383939623736363832653137666666326566626339666234
          38383130646236616666393330633632393564643963303534333964623864616335346230343334
          31383034363931636236613134393335323439626336303537626336356662613031343438373338
          37316362623364396462623164326163643538616362336630666562356235323432633332336539
          39363862323533616562653765326239363663366232303134666538663532313830656233643832
          30343630386166363639396463366662363532333432643130623835616135343330393363316332
          30656464316636326336396437663130393238346265326539353930393230303866306332326664
          31386463613265313866616630613437636366373836393235363466653663383036653433643561
          33353831396136373564646364313236373138346536323336316638326337316636636433383532
          32313734383061626461313262623233623964303239643234663933316666623866303739653165
          61356364356162333063316663326263306531393930333633353332383262373163386139656166
          63653162373164383231633239653862373439363165663937613430323635303432363363346432
          38323165373635633339366135316133373333353338343734316363643863623930663234623332
          35666363363334356163303563373332366134353837643562613239393536383033366365303239
          30373565623334363232386466393733636664636462656339373966323334663665663738633834
          30626433656439396463616137376261323437396364316136383236663531303363306333663831
          33383032306332323737653232393630623933616166613061623733366537643561353539303139
          65636136663338306230663461353037663164656332336437646139363834636366306237383663
          37643035613433613430336164306533303366616130366139326537376562373333353236353138
          37303630316161623462383835386336636465653464383861376331323833626339373439643837
          38646666346563653765623039616262386133653430396235383335643430336666346261643738
          66336133653461313135343038363633396638643063656236656632633132656563383736303663
          30323338646231666364333337383839373030326431333531316237323236383133336435386531
          32623365633763316139336232313262383139613935323335313664613464383934633564373361
          30303430383838383235323465326632313536663632653863633034633361653564373365383231
          39376538636435343465616263326131366139343330373836366637393761346361656239313463
          62656365633161393961313965663962376364663836656264366262333264626263326530386234
          65303733333965353032613562383736333731393830373761666663366638316665613334343934
          63366665393939653338663935643733386532653131363961343334333663306330616632613563
          32616530343330313662333934343564316463633536303966373866313630613261336562653530
          35383030373662356534366664643866663930393133393565303561303861356137363539383637
          33623161323738666138326561386531363932633631613531333232646365653032313161306464
          61646637653166613439346165616233663739626135363130386136383366663931363333323765
          34353563396136363833386664353038613565636438363363356230363235336631383462353066
          64363038353764363266306637323135303632316166356138653635316661353435306331333963
          62616631616264393263346466616537336238393332623566616563623935326133363265386132
          61386365316461323430393463393632383562336338663665366233313166306237643566633934
          63366338643166643264313131393265656464633438373038303463363166626261663166656532
          33363663613137633763366632313833383464313037393330356261616664306138396464643766
          66313135356563353265383762656637343232613733613534393763633836666132323830346461
          38303232386130373530333537376333393666373262336261353531643838666562643335356437
          33643766333131306434663663323536373466386334613761653266306237376466323535636431
          35356133356365653962616630386262666434663133336231323065653736613534653065363635
          37393535336533386366633032353736326236646533396236306631663135363238626563643364
          37373565353063343330643737396335663438646361646131353131396533613961363631316439
          36363637363038346561323030306337346664386134366464356564363838353034636264666262
          33393665653962643462373934393431393134613065376230313262666338313233396535363936
          63316138613535386364646465346536653463643838333434316635373364323438376433313964
          39646562613664636331303936616265353934346132616664353931376336323832366534623538
          64653539303063643662373961333962376532396566336135663336383763313932353265366338
          65326165333961613438363864376639633938363431356664393964356265623231666230646436
          66663436636233633033646661626562633432626662343462303938333033383935393035323263
          39663430663835383965643431323365366266653162353837323238663231643034333961653334
          31373564393563373966393539336130616433393631386530343837393839613338316133643435
          37373262653833383162356637386562636234343961653636623462383133653934633436643234
          30373034366366653830393661613135373766623361366438363764626131383562396336653238
          33366136623033393134366536663335663364653664343539303861363863393135353532653866
          32383961333636353966323161333166653030656530613365333835343435646134383934653134
          63646430353765623238626234363836633664626466343630393535663963306535626261653539
          31656564346436353533366439613365366239376161643337373134613561383065323135663835
          62393663363937333365316330353266396134393331373037616634343538626166303735333136
          33306363313164373938653639633461396631373139656561653931373364393738666633646665
          36656663656262306663326365316436336433313036633335623064306338653663343464643533
          37373032383466386438373335343066363333373530636663646262663937333664326232396362
          34633733343731636164306636366233323539383830663564613730313238363138626230643561
          33303964393330643761663834653036623664646366383035343433646135636563303038626436
          36613061376335663938653538303534306332656437346532333461653362386138396362356632
          63623862313032643130633433313663623234646635626233393830633630646431646362373632
          30643038343635363938666464356665353231623166666535646163346634313439316665376530
          39646135653335333234643238383431306330343764643062643266326237643630336437623631
          34323865616231663536373065623832656463356134643231623832656533343533613837393662
          32336134386662363436636566373239653637623132633462383062356430316536366131336138
          66653539303436313663363264666232326133366636653131376635316139326633663438373631
          39333566313261306663646466666261313335623631363537313432646662393062653839633039
          63323163343137346138373132653431393934353830643439333437383337656433636161373565
          63303838373836366430303631643265356165653463336232643733333761373932623432623338
          33646332386339663561663535653634666238643335633761363261636263623432336630376364
          64646464373038353361366265333435396334303938356365306236313561373065333337353663
          30373362346633376438383734646461323137366366386463343334633063366561326635353131
          62366432393730353265643361383665383735356438336363613039373130346638626537626638
          66333330633336303663383034633530653634663736633861333261653531643163633063333262
          31393133396337316230616366356338363731383431333664376663646632306330306666396333
          64373763356130373138613163616232613661323966336639303462346331663638653334336132
          30613365383761616662656637333364313765666536643937356364643037646632653537376662
          30653966623037643566316266353637366232316666643463353433376337643463623037306137
          37326363626432616334643837303031626166353933616335383035343964333838643939626331
          65616535306333373166306138306334383533363937353062313431313033626237313038303262
          37633430303730656232666237626538396163663038373335653335616433313566383330323065
          63366431383533636530326566393065343661353366333465336235363536373163613430356365
          35343834313335363236656133333463623338646138306238626462656236656330353763363639
          30303337316630383862333230626639373239613861623266633438643138373930316466613433
          39636538396266323062336464393132303066373531643064656334346534353932613761333333
          35643561636138336362333832623030393434373632373231633863623062653561383062346565
          39316363346135336366646634343437653430313431353538373636323137373338383061313337
          39636333343538383535626266646639363465353737373763333537353165623134356635326665
          31633461643530633661393436666536663939343562663334643262343061386363633933623363
          62643864323132653034633762656133353964393439323631313836316561343665633765653062
          35313361326337363336313736643764326139366566373366643735363631623538636566643130
          63616334306435363432643233383330653961623462383131616131323661663034613566306131
          36326637373138323764
# END: TLS
