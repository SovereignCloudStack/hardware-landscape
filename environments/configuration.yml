---

##########################################################
# Global
traefik_enable: true

##########################################################
# proxy/client

# docker
docker_configure_proxy: true
docker_proxy_http: "http://{{ groups['manager'][0] }}:8888"
docker_proxy_https: "http://{{ groups['manager'][0] }}:8888"

# apt
proxy_proxies:
  http: "http://{{ groups['manager'][0] }}:8888"
  https: "http://{{ groups['manager'][0] }}:8888"

# Needed by the Kubernetes Play
proxy_env:
  HTTP_PROXY: "http://{{ groups['manager'][0] }}:8888"
  HTTPS_PROXY: "http://{{ groups['manager'][0] }}:8888"
  NO_PROXY: "*.int1.landscape.sovereignit.de,*.landscape.sovereignit.de,10.10.21.0/24"

##########################################################
# proxy/server

squid_configuration_directory: /opt/squid/configuration
squid_docker_compose_directory: /opt/squid

squid_host: 10.10.21.10
#squid_tag: 5.7-23.04_beta  # don't get fooled by "beta". this is actually production ready
squid_tag: edge


##########################
# system settings

motd_show_ssh: true
network_interface: dummy0

#osism_setup_gather_subset:
# - "!network-switches"
# - "!dhcp-static-nodes"

management_domain: mgmt.sovereignit.de
management_gw: 10.10.23.254

##########################
# dnscrypt

# DNS Crypt acts as a DNS proxy, but is currently not really needed.
# It was a experiment.
# TODO: decide if we remove or keep it
dnscrypt_cloaks:
  - "api-int.int1.landscape.sovereignit.de      10.10.21.200"
  - "api.int1.landscape.sovereignit.de          10.10.21.201"

############################
# kubernetes - K3s configuration
apiserver_endpoint: "10.10.21.202"
metal_lb_ip_range: "10.10.21.220-10.10.21.239"

#metal_lb_type: "frr"
#metal_lb_mode: "bgp"

##########################
# docker

docker_user: "{{ operator_user }}"

##########################
# operator

operator_user: dragon
operator_groups: [ "dragon", "adm", "sudo", "docker", "dialout" ]
user_sudoers_type: "user"

# Do not add users here, because they are deleted enirely
# please add state=absent to the users to be deleted in user_list to
# have proper numeric uid management and to not delete relevant files
# If you really want to delete a user add remove=true and force=true to the user.
user_delete:
  - "osism"

user_list:
    # The user gets a password because this is sometimes useful on the bmc console
    # for debugging in exceptional problem situations where "dragon" is not usable.
    # (i.e. extremly high load, sudo configuration and file system status of /home)
    # The system will not provide root login by ssh.
  - name: "root"
    password: "{{ operator_password_root }}"
    key: ""
  - name: "scoopex"
    key: "github"
    primary_group: dragon
    uid: 45001
    groups:
      - docker
      - dialout
  - name: "garloff"
    key: "github"
    primary_group: dragon
    uid: 45002
    groups:
      - docker
      - dialout
  - name: "berendt"
    key: "github"
    primary_group: dragon
    uid: 45003
    groups:
      - docker
      - dialout
  - name: "ignatov17"
    key: "github"
    primary_group: dragon
    uid: 45004
    #state: absent
    groups:
      - docker
      - dialout
  - name: "akafazov"
    key: "github"
    primary_group: dragon
    uid: 45005
    #state: absent
    groups:
      - docker
      - dialout
  - name: "fkr"
    key: "github"
    primary_group: dragon
    uid: 45006
    groups:
      - docker
      - dialout
  - name: "fdobrovolny"
    key: "github"
    primary_group: dragon
    uid: 45007
    groups:
      - docker
      - dialout
  - name: "osfrickler"
    key: "github"
    primary_group: dragon
    uid: 45008
    groups:
      - docker
      - dialout
  - name: "zuse-z3"
    key: "github"
    primary_group: dragon
    uid: 45009
    groups:
      - docker
      - dialout
  - name: "matofeder"
    key: "github"
    primary_group: dragon
    uid: 45010
    groups:
      - docker
      - dialout
  - name: "MatusJenca2"
    key: "github"
    primary_group: dragon
    uid: 45011
    groups:
      - docker
      - dialout

# yamllint disable rule:line-length
operator_public_key: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC2wE2xiuO+i3qmDvu8kCCKX7U7H1diOICbWmR2UrKIxqWgcfWMQsT3WclotJKuVJuKIWyFD6ZNwwLuvC3RxVSqhCiWjqxg3jzJBj7/C1O3IYyLGTUl/x7Cky530lf/aj4wrwt3Ketk/4QNwgget2nCvOy0S2NDCJ3rL6oIUjdJekvRrFf9IbWeX8fqYYCoh1cYJWto1XYPnhMDAB/lqtjN1ssurLSKoJg/bUT7q/KkIvvA/BOR2NMqS0aGx+bKhdkeB22V/t75Ct8ymoCYk9+MTC9i/QX20Fi7835/W7Gl18J8NiO9ebaWyYbsxZ5klWXQa5EiLLBDZ82OR88G+0FjXp1Z3VG6FcpdYpW7sxrT21HEvWOnQACZCdlzwyBJ31id/LjDRhJU6BmZm0Sa9EOJNL8XVOUUzuoa0XL1mIVTsmLpUwqLSfw6Ditb+q4afFi0iYMe3JKOt+JmftvBgeQCjNUsCzk+Ny2j6dZKv2aeF5LOQZGRM3HzG39Gkir3q1zdWmCl4lc3QQBfr5ZcdAp+wQMFSgJAudKffO9kdDVNoyjgih7rD3E+JjJdhY9//WQEEBm2vfEqm7qqEQUAELd0JBCivJmOhUVH0rGbTrnkTBtLR4Au40W5aYaNQJ7+U3hTRrvpycSC1pUU3Wq3OXJd2FRDgKQJljQcpBw4V9j8GQ==
# yamllint enable rule:line-length

# Todo: add lookup to created users instead of repeating
operator_authorized_keys_minimal: 2
operator_authorized_keys:
  - "{{ operator_public_key }}"
  - "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCg4wI3FupkrmzAkQfRkqkS5CQUp3NiIf3jkFk+E7ax/hdgbaW/UjBl9j15BMv/Mmguk11OtHTDgg57VrsL+mPtortKe2DvoVQZxvtnuDhZPFXlNZWJxYkcUUoPy7OwlDjTvfX9QS27rX8Kmz+wKRWz2VSZU3IqTDho+0NX8r3Zrbtkq75nB4Fq99WOzbhdve78GmTABgQvbT5Ypm7bc77cftARWJiyprHocUizui6CdITTPpxUf98HaFo5ZP3YhnZsMlSDu2T2ofiHKXhW+Q7FHP9GiiaH173zLxXFV6LpJ/wDyI8wT3jqPE+FKXyPXKVCDohmbQHOzY5eiePSqhsRbd19wGmkqqqTtKjL9/yUPQ8Lkft0iQPvmepzrB3qL9dLBthKrLNqDAeEv3Eg9MsTTaRyVuQRDizCeySXNMgv+CoeT6PyQstKV68SwUhsCAyIok8y6hFdHSVve66De31fYvkHtMu9C/R5NuhxMuZazazKlpDN9eeBmvT4Pqc5lrc="
  - "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDTMjccqOa268YWdqAhP9awmMtjey/MK92gl+IwpQbxxsEW/HM/EKPGQnF0+7lD6G1W2IqJnFTM5fgWjAmIfzGeR3ySjJDlaQtZdiMHk5YR7VrgRot0odlGZpkkkJnK88xDVYqkq3xmJx39DTF8sKxfWThc1eu5c7Ws7hIvDCvFu4I5w+iPB4R2eycw//A1q3hutagyghJAXad46PgBmu1kODwQG3+sPqNyb4ruh0ODDbSlBZ1XIW4TgaYce5tR8ABlVvASafhZOw3CNK9rThhU4IG3IHvqCsGax269WrIGvSWIkI4EKjvFAEyshOcBsGwjaxm9GxrJLBLpyMVds/Rn3vu4JmupJJFHnWtEyQY6pd77TKyatRcZFjDXrGTPtiHCaMLG49RXvoeHIebjPB3bHqVWJSK5c81oSQwPZTxze5jY2LQOHmpBQ6D2l+5lkzgTQiF3EL7gD6m5Wweht++gQHJ+PnsCkaMZzoT1VdIGrzMO6Tf4O1WTQGkuD/9YtaM="
  - "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIACLmNpHitBkZGVbWAFxZjUATNvLjSktAKwokFIQ9Z1k"

##########################
# hosts

hosts_type: template
hosts_additional_entries:
  api-int.int1.landscape.sovereignit.de: 10.10.21.200
  api.int1.landscape.sovereignit.de: 10.10.21.201

##########################
# ceph

ceph_cluster_fsid: 44bc2d19-fd83-4b92-a6c4-eed358e35672
# BEGIN: TLS
certificates_ca:
  - name: custom.crt
    certificate: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          65333032386133316163643537383136613334653536383636306263376630353436656330326132
          3233353665636530346535366435373138356437366164350a316438623562316264323066393931
          30393237386564626639346238613338383930393137356232303132393239643336383734306135
          3465346461326533620a643339626537383066366139313233613366373531613433396430333263
          35316438383639623039653933623433643465396533313331613839393163386538373865393631
          64623732613566393666613430363932303334363039323363363833353431623636363962336531
          31656633326335333462633232333533653238306237326166623866616562366466386662623730
          63633136623866306133616336653837636330343362666232643032636564633666646134346263
          34303238626134386438663761663365623466353235393037393433393230643830653930633462
          30613230393064613533666438333839626365646236336337333239313531373236643662303932
          39623230643234383265323837366364303534663436303266653234353032343630383530393030
          35623439356263396132623031653662393338353137353539346363666464333561383535353232
          65313339303935343763323338656465653362633038646338366564393238303366616331663433
          33356636313166616661333666333337626239303361386337383638396437653664616562333034
          31656332346531333665643530626437316266656563666466376331386539323365376164393132
          35323733376536333066343030396562646237366635643030336637326536336136336461386635
          62356139656535623037323434383431396134303463316336666134363634643736633137656133
          31653337656537303033636234643631663964336162646431356364303539373233623462373861
          37313233313463623962383465316238373865386563323962663463313638323637666265323831
          61623165613361376133383331323931363430633139653266646462303262363137646365653833
          63396634363230346330336466366364653863613966636331393139656533613764356264666433
          37353636336537393463333062366435373733623365663963623236393636393436366636653864
          34623330643764333436353731363530363362333733626234363734303339636533636430336339
          31643235366163373461363064356633313664346535373966643335323439343137313931656661
          32333233396330653563343530316137363530313063623262363739393065396535393263643264
          32663834663238313034353734353962346231656161653561646363633266343264343465633332
          36383132366331326630636464663432313631393332633264623766636430393137383639623630
          36626462643430633830363565623239333362333461353664623532343935386564373038653665
          66666363623062383434373639613536613433303863643932656431313835323061313239656236
          61376563666463383434366164356236643139393939303037333737323962376631626134613734
          37396235643265646638383733336164393463336130333838623239643931353438623335396330
          66666639386133306661373363613032613939363437643039373166353035386436306462383939
          34363063353065656266376437303531373962613264383663323837666166613463633536336433
          64636163336635336434656137323737633036653935363833623631393835656431356430373863
          38386361346661343763616232613139643931613961623361343665626138633134376139386135
          30643631393336663133346365353832383837323631353739643535633463313338326630363063
          31346264663661363338373236633937386535663733653532646164343864316131316263623937
          32386362643633633838343536383762633062343366646133303565326335326233623663393838
          65656332613139356330326263626264663334323462633263333462646430313833326435366136
          66316232323435336238373762383233623939376164376136643437386166613261636465336432
          33386532346533343339383466333834356334336333623663373832656461626464396439393461
          61326433393532656139393238303832626335366334623732613362663338353266393463383737
          30306533393138373134613730383366613866333462396238653838663564646535343562373162
          35313162613234343630353230636435363565373331343830366635363764393531333039323330
          65616430333566623433663235363436313637343164306464636230636332346136303830613565
          32616530363235323037616366653238333661353232306661653164313534306663613231323330
          36653739613232653034636136333436323934353662616537383938626665663939373231353734
          66393937323833303833633136356662626130323935626632303262373936643966613336313632
          62313932663362336634303237346332393335353066333263646533613533613138323936643737
          61643630383462643937623731323530666566373730396537366139633933303861306336393333
          35393263316261383565626639663165336434343239663637383739356137663664333265343338
          63646235653039303133383639363464386434343136356332663461383630643561333736353961
          30393535353666643230393430643961623066353234393633353133393864323838663939356130
          32393765633765663938323739633365633233363234613265623538663963316332313663383666
          34326532633565656133633439643135343031663435633138386463663139623663313930633239
          62373965646132386266303634666437643839653235626234323937633432643635366230373039
          64313930363732393133343331326536613561613364306638393638386634633839666138386635
          38636165363032613932643433653038323161383064616431633832383066373837323031303762
          34386566626165343262613236356430646565326266343130633531633832626565643661353137
          66613933633365383335623837303563383235636538393639333933333262626265353066613035
          65326439393831666533326135383661393930633364363231373361326562623066663265386639
          62303636383138373536303536336465613333316631336136333866643061623630366263626133
          38306561353934383465633966313333306466353239366533396466333931316439623465326634
          33326535653664393661643761363233663237653233623061643539373236303463643065646564
          38303765323035363136306363363965653431366263653663613435653636633732616631376238
          61353466303735336332636238373033613639303462333931623430626236613264336635343033
          34376630303837626132613433326233646231383130623138343837326439663461346665306666
          32333636366337653161613764653933346666663831376363616637383133323138373936323236
          62653933366331656236356233643134653462373962653839313634653633326538616437376263
          63336632313466376161383063613335616663376664393064636332653963373239643131336631
          37633466363063343866373931653137363139336634333164326634343838656661616263373536
          63383632333062663731643033363234383833323162373766386661323537333765363535366131
          33393163613130623063356530306461323963343938336537366238366537616561323063333938
          37613734396634623361663837376363323836363531343266646131353633323636323237316566
          36346636353533656131343366343039623435343733613739356531623633653363393437396330
          32393736336566623239353563303836343038366266306534636238653163376564356235313035
          31366231623762613738373936333531333136393465383366353934323165656431663038323965
          66356539306539353031613231316531346263636135396638373263386361653531653962623863
          61636430373632623634653866353033383963353439346334646263326131653131373162353930
          66343831636630666234373139623638376138323535326664633537383037343435623635643539
          62663263666635633535396639343162346164626461393335336538613335363735366331303232
          38633262323737376566636636376438393138323939633966626636336537366534643563633161
          38653435626465356235343633663937396638656430353164376331646435623439623739626134
          63633163373230323464386136386233356630303166323862363261383733363362653062663238
          62646366366239646335643963333038383864356435306236616664353466613833373562366161
          30623135333736346364323932653464363434333763623961623438393932626331666335656465
          39633166616535383934646564653632633735636635636435653037363261663131333666363631
          64666265333662346535636537373034356335633931643235623635333031666466316434316261
          35356364386230663562613464663333373036396133396539343465623763653732623437396532
          38313533313330386332383766313038326230376565313236633235373662383866643530333936
          62643664303739323164643938306132633765326332626230366163396639353733363361643261
          66663261396637653165623461656366636161303061643639313838386236643031616565306264
          32366436323335303332306462366638626164626162326337623064303431646362666133636431
          39613738393035613634316162353130656434316331386361306334353839626533626137396165
          39653231303536633262626561663538373366393466636230323538396130383433363234333331
          64336334396539373462313138316431323930383536303132303662656334356663346237313437
          30633765326632646532616565616666646664643536623234323132656661303635323939353337
          66363238666339393362323335633534343365383438376230316138663066653761376639393839
          61396432636134633834333263636434313032396231356363663336626563323539356534666639
          65636531633537306134653862383961356131653031383739616362306365343064376339333938
          36343532653466363736343931643831656264363134306361303166393437653639326462393165
          31393434343437663061336465303033376162306562306665396564613335653162643264643162
          62653538646130623163356435303463333766306238303239653962663337386335306265396161
          37363965326261626466
# END: TLS
